%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% RCS INFORMATION:
%
%       $RCSfile: ug_stereo.tex,v $
%       $Author: johns $        $Locker:  $                $State: Exp $
%       $Revision: 1.21 $      $Date: 2014/12/29 03:16:09 $
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% DESCRIPTION:
%  How to do stereo
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Viewing Modes}
\label{ug:topic:stereo}

There are many different viewing modes available.  These show the
scene in orthographic or perspective views, and in several mono- and
stereo- graphic displays.
\index{viewing modes!changing} 
The stereo mode can be changed using the
{\tt stereo} entry in the Display menu or the text command {\tt
display stereo {\em mode}}.

\section{Perspective/Orthographic views}
\index{perspective view}
\index{orthographic view}
In the perspective view (the default), objects which are far away are
smaller than those nearby.  In the orthographic view, all objects
appear at the same scale.  Since some prefer one over the other, both
options are available.  Perspective viewpoints give more information
about depth and are often easier to view because you use perspective
views in real life.  Orthographic viewpoints make it much easier to
compare two parts of the molecule, as there is no question about how
the viewpoint may affect the perception of distance.

\section{Monoscopic Modes}
\index{stereo!off}
When you normally look at objects, your two eyes see slightly
different images (because they are located at different viewpoints).
Your brain puts the images together to generate a stereoscopic
viewpoint.  When generating a single image for the computer display,
the default calculations (mode {\sf Stereo Off}) assume there is 
one eye centered between where two eyes would be.  
For stereo, the left and right eye views need to be generated independently.  
Choosing mode Left produces
the left eye viewpoint, while Right produces the right eye viewpoint.
The left and right monoscopic modes are most useful when exporting scenes
to external ray tracers.

\section{Stereoscopic Modes}
Molecules may be rendered in stereo, which can greatly enhance
the appearance and visual content of the displayed systems.  There are
several stereo formats available:
\begin{enumerate}
  \item Quad-buffered stereo, (aka CrystalEyes in older versions), 
        which requires a stereo-capable monitor, 
        quad-buffered stereo video board or GPU, 
        stereo emitters and stereo glasses equipped with 
        liquid crystal or polarized lenses.
  \item Above/Below stereo;
  \item Side-by-side stereo for paper-printed images;
  \item HDTV Side-by-side stereo for stereo flat panel displays and TVs
  \item Anaglyph stereo (requires stereo-capable monitor, 
        quad-buffered stereo video board, 
        and red-blue horror-movie-style stereo glasses).
  \item Checkerboard, also known as line blanking stereo,
        works with compatible shutter glasses and DLP projectors.
  \item Column-interleaved,
        works with compatible shutter glasses and LCD panel displays.
  \item Row-interleaved, also known as line blanking stereo,
        works with compatible shutter glasses and LCD panel displays.
\end{enumerate}

\index{stereo!mode}
\subsection{Quad-buffered Stereo}
\index{stereo!mode!quad buffered}
\index{stereo!mode!CrystalEyes}
Quad-buffered (aka CrystalEyes) stereo is the name used within VMD for the 
quad-buffered frame-sequential stereo display mode found on 
professional graphics workstations.  Quad-buffered stereo generally yields
the highest quality output, and is therefore the most desirable stereo
mode to use when available.  Since quad-buffered stereo requires more 
video memory, and special display synchronization circuitry, this mode
is usually only available on professional-grade GPUs such as 
AMD FireGL, NVidia Quadro FX, and similar products.
Typically this 
mode is used to drive LCD shutter glasses with a CRT display,
120Hz LCD panels, or various high-end stereo-capable projection systems.

Quad-buffered stereo mode provides separate left and right eye frame buffers.
It allows the a window display in stereo, while all
other windows appear as normal.
The display must be set in a stereo-capable mode before starting
\VMD.  On SGI workstations, one must use either the {\bf setmon} or 
{\bf xscreen} utilities to configure the display mode.  On Sun workstations
this is done using the {\bf fbconfig} utility.  HP systems use the
{\bf sam} utility for display configuration.  Microsoft Windows uses
the {\bf Display Properties} tab to control video board display mode
settings.

Once set in the proper display mode, start \VMD\ as normal, and select
`QuadBuffered stereo' from the Display menu.  The image
should switch to two images nearly superimposed, but slightly offset.

\subsection{Side-By-Side and Cross-Eyed Stereo}
\index{stereo!mode!side-by-side}
\index{stereo!mode!cross-eyed}
Side-by-side stereo means that the normal display is divided into two
halves, a left view and a right view, each occupying one-half of the
original display area.  Each view displays the current molecules from
a slightly different perspective, corresponding to the left and right
eye of the viewer.  The images are separated, however, so to actually
see a 3D object you must direct your eyes until the two images are on
top of each other, and then focus on the resulting image until you can
see it as three-dimensional.

There are two ways of placing the images.  In wall-eyed stereo, the
left eye's image is located on the left side of the display, and the
right eye's image is on the right.  This is the standard method for
displaying stereo images in publications as it works well when the
display (in this case, the piece of paper) is close to the eyes.  It
is called wall-eyed because your eyes are directed the same way they
would be if looking at a distant wall.  In \VMD, this method is
referred to as ``SideBySide'' stereo.

In cross-eyed stereo, the left eye's image is located on the right
side of the display, and the right eye's image is on the left, and
hence the name cross-eyed.  This is mostly used for distant displays
(such as overhead projections) as it is much easier to cross eyes at
that range than use the wall-eyed method -- you are already looking at
the wall.  In \VMD, this method is referred to as ``CrossEyes'' stereo.
This mode is supported by all GPUs.

\subsection{HDTV Side-by-side Stereo}
\index{stereo!mode!HDTV side-by-side}
This stereo mode is the same as the regular side-by-side stereo mode
except that the aspect ratio of the displayed image is adjusted to work
correctly on HDTVs and stereo flat panel displays such as 
DTI autostereoscopic LCD displays.  This mode is supported by all GPUs.

\subsection{Checkerboard Stereo}
\index{stereo!mode!checkerboard}
Checkerboard stereo works by interleaving the left and right eye 
views on every other pixel in the display, in a checkerboard pattern.
This type of stereoscopic display mode is compatible with a range of
DLP projectors and TV's, in combination with shutter glasses.
The only special requirements for the graphics accelerator are that 
it provide a stencil buffer which is used to generate the 
alternating columns in the final image.
This mode is generally supported by low-cost gaming GPUs.

\subsection{Column Interleaved Stereo}
\index{stereo!mode!column interleaved}
Column-interleaved stereo works by interleaving the left and right eye 
views on every other vertical column in the display.  
The stereo hardware either separates them into two separate displays or blanks
the even or odd columns in sync with shutter glasses, or otherwise makes
them visible only to one or the other eye, in the case of autostereoscopic
displays.
The only special requirements for the graphics accelerator are that 
it provide a stencil buffer which is used to generate the 
alternating columns in the final image.
This mode is generally supported by low-cost gaming GPUs.

\subsection{Row Interleaved Stereo}
\index{stereo!mode!row interleaved}
\index{stereo!mode!scanline interleaved}
Row-interleaved stereo, also referred to as scanline-interleaved, or
line blanking stereo,
works by interleaving the left and right eye views every other scanline
in the display.  The stereo hardware then decodes the interlaced
signal and either separates them into two separate displays or blanks
the even or odd scanlines to display only the left or right eye image
at the same time that shutter glasses are polarized in the appropriate
way.  The only special requirements for the graphics accelerator 
are that it provide a stencil buffer which is used to generate 
the alternating scanlines in the final image.
This mode is generally supported by low-cost gaming GPUs.

\subsection{Anaglyph Stereo}
\index{stereo!mode!scanline interleaved}
Anaglyph stereo refers to the use of colors to separate the left and
right eye views from each other.  The user must wear glasses with 
colored lenses, such as the red-blue glasses one finds at some sci-fi
and horror movie showings.
Anaglyph stereo has one major disadvantage when compared with quad-buffered
stereo, which is that its color rendition is severely constrained.
This is an unavoidable limitation of anaglyph stereo, and it is up to 
the user to use color schemes for their molecules that still look 
visually pleasing in this mode.
This mode is supported by all GPUs.


\subsection{Stereo Parameters}
\index{stereo!parameters}
  A stereo image is generated by drawing two images from two
different perspectives, one from the left eye and one from the right.
The images are made by finding the view that would be seen by someone
located inside the scene.  The method uses two parameters to find the
view; the \index{eye separation}{\it eye separation} and the
\index{focal length}{\it focal length}.  The first
defines the distance between the eyes and gives the parallax effect.
Setting the separation to 0 will result in a flat 2D image, while
setting it too large will give most people a headache.

The graphics model used by \VMD\ assumes the eyes looking in front of
the viewer and focusing at the same point the focal length away.  If
the focal length is 0, the viewer's eyes are crossed and looking at
each other.  A larger focal length will often help in creating a
viewable image.

  The two parameters can be changed with the text commands {\tt
display focallength} and {\tt display eyesep}, or using the
\hyperref{{\sf Display Settings} window}{{\sf Display Settings} window [\S }{]}{ug:ui:window:stereo}.

In general, try to make the eye separation as large as possible
without giving the viewer a migrane, and try to vary the focal length
to cut down on double images.  It may often help to translate the
molecule forward or backward and also adjust the scaling, since there
is typically an optimum position for a molecule for a given set of
stereo parameters.

